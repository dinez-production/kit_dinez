
> rest-express@1.0.0 dev
> NODE_ENV=development tsx server/index.ts

[dotenv@17.2.1] injecting env (0) from .env -- tip: ğŸ” prevent building .env in docker: https://dotenvx.com/prebuild
ğŸ”Œ Attempting to connect to atlas MongoDB...
ğŸ” Performing startup health check...
âœ… Connected to MongoDB Atlas cloud database
ğŸŒ Environment: Production/Cloud
ğŸ“Š MongoDB version: 8.0.12
âœ… PostgreSQL connection successful
âœ… MongoDB connection successful
ğŸ“Š MongoDB version: 8.0.12
âœ… MongoDB version is fully supported and optimized
ğŸ“‹ Advanced features available: Change Streams, Transactions, etc.
âœ… Startup health check passed
ğŸš€ Starting database schema validation...
ğŸ”„ Starting database schema validation...
ğŸ” Validating PostgreSQL schema...
âš ï¸ Users table missing - will be created by Prisma on first use
âš ï¸ PostgreSQL validation issue: PrismaClientKnownRequestError: 
Invalid `this.prisma.user.findMany()` invocation in
/home/runner/workspace/server/migrations/simple-schema-check.ts:91:30

  88 }
  89 
  90 // Ensure we have the latest schema by running a simple query
â†’ 91 await this.prisma.user.findMany(
The table `public.users` does not exist in the current database.
    at ri.handleRequestError (/home/runner/workspace/node_modules/@prisma/client/src/runtime/RequestHandler.ts:228:13)
    at ri.handleAndLogRequestError (/home/runner/workspace/node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
    at ri.request (/home/runner/workspace/node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
    at async l (/home/runner/workspace/node_modules/@prisma/client/src/runtime/getPrismaClient.ts:862:24)
    at async SimpleSchemaValidator.validatePostgreSQLSchema (/home/runner/workspace/server/migrations/simple-schema-check.ts:91:7)
    at async SimpleSchemaValidator.validateAndMigrateAll (/home/runner/workspace/server/migrations/simple-schema-check.ts:38:24)
    at async runStartupSchemaCheck (/home/runner/workspace/server/migrations/simple-schema-check.ts:256:20)
    at async performStartupSchemaCheck (/home/runner/workspace/server/startup-schema-check.ts:17:21)
    at async <anonymous> (/home/runner/workspace/server/index.ts:50:3) {
  code: 'P2021',
  meta: { modelName: 'User', table: 'public.users' },
  clientVersion: '6.13.0'
}
âŒ PostgreSQL validation failed: 
Invalid `this.prisma.user.findMany()` invocation in
/home/runner/workspace/server/migrations/simple-schema-check.ts:91:30

  88 }
  89 
  90 // Ensure we have the latest schema by running a simple query
â†’ 91 await this.prisma.user.findMany(
The table `public.users` does not exist in the current database.
ğŸ” Validating MongoDB schema...
âœ… Collection 'categories' exists
âœ… Collection 'menuitems' exists
âœ… Collection 'orders' exists
âœ… Collection 'orderitems' exists
âœ… Collection 'notifications' exists
âœ… Collection 'loginissues' exists
âœ… Collection 'quickorders' exists
âœ… Collection 'payments' exists
âœ… Collection 'complaints' exists
ğŸ”„ Adding missing fields to existing documents...
âœ… Missing field addition completed
âœ… Schema validation completed
âœ… Database schema validation completed successfully
âœ… Schema validation completed successfully in 1524ms
Re-optimizing dependencies because lockfile has changed
5:18:21 AM [express] serving on port 5000